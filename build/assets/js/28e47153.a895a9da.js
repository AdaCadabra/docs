"use strict";(self.webpackChunksubsquid_docs=self.webpackChunksubsquid_docs||[]).push([[648],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),h=a,m=d["".concat(c,".").concat(h)]||d[h]||p[h]||o;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},43270:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i=["components"],s={},c="Local runs",l={unversionedId:"recipes/running-a-squid/local-runs",id:"recipes/running-a-squid/local-runs",title:"Local runs",description:"This guide considers that a Squid project has been created or that the Squid template repository has been cloned and maybe customized.",source:"@site/docs/recipes/running-a-squid/local-runs.md",sourceDirName:"recipes/running-a-squid",slug:"/recipes/running-a-squid/local-runs",permalink:"/docs/recipes/running-a-squid/local-runs",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/recipes/running-a-squid/local-runs.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Generate type-safe interfaces",permalink:"/docs/recipes/running-a-squid/generate-typescript-definitions"},next:{title:"Multi-chain processors",permalink:"/docs/recipes/running-a-squid/multi-chain-processors"}},u={},p=[{value:"Launch the database",id:"launch-the-database",level:2},{value:"Launch the processor",id:"launch-the-processor",level:2},{value:"Launch the GraphQL server",id:"launch-the-graphql-server",level:2}],d={toc:p};function h(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"local-runs"},"Local runs"),(0,o.kt)("p",null,"This guide considers that a Squid project has been created or that the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/subsquid/squid-template"},"Squid template")," repository has been cloned and maybe customized."),(0,o.kt)("p",null,"To run a Squid project locally, it is necessary to launch its 3 main components:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The database (by default, this is a PostgreSQL instance in a docker container)"),(0,o.kt)("li",{parentName:"ul"},"The Processor"),(0,o.kt)("li",{parentName:"ul"},"The GraphQL server")),(0,o.kt)("p",null,"Let's see how to launch each one of them."),(0,o.kt)("h2",{id:"launch-the-database"},"Launch the database"),(0,o.kt)("p",null,"In the project's main folder, there is a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file, defining the services a Squid depends on. The only service necessary so far is the database and as such it is the only entry in the YAML file."),(0,o.kt)("p",null,"In order to launch the database dependency, simply run this in a command line window, from the project's main folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose db up -d\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"-d")," additional parameter will launch the instance as a daemon, making sure it will not block the terminal window"),(0,o.kt)("h2",{id:"launch-the-processor"},"Launch the processor"),(0,o.kt)("p",null,"The processor should probably be considered the main component of a Squid, as, when launched, it will start fetching data from the Archive and transforming it. To start it, simply navigate to the project's main folder in a console window and launch the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node -r dotenv/config lib/processor.js\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"-r")," parameter will make sure the processor reads the ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," file that comes with the project, which defines variables for the Postgres database port and which port to expose for the GraphQL server."),(0,o.kt)("p",null,"These can alternatively be defined as environment variables."),(0,o.kt)("h2",{id:"launch-the-graphql-server"},"Launch the GraphQL server"),(0,o.kt)("p",null,"How good would data be if it idly sat in the database? For an API to be complete, it needs its data to be accessible. To do so, we need to launch the GraphQL gateway, by navigating to the project's main folder in a console window and launching the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run query-node:start\n")))}h.isMDXComponent=!0}}]);